<div class="container">
  <h2>Dynamic Form Example</h2>
  <form [formGroup]="dynamicForm" (ngSubmit)="submitForm()">
    <!-- Static Input -->
    <label>Name:</label>
    <input type="text" formControlName="name" />
    <div *ngIf="dynamicForm.get('name')?.invalid && dynamicForm.get('name')?.touched">
      Name is required.
    </div>

    <!-- Dynamic Email Inputs -->
    <div formArrayName="emails">
      <div *ngFor="let emailCtrl of emails.controls; let i = index">
        <label>Email {{ i + 1 }}:</label>
        <input type="email" [formControlName]="i" />
        <button type="button" (click)="removeEmail(i)">Remove</button>
        <div *ngIf="emailCtrl.invalid && emailCtrl.touched">
          <small *ngIf="emailCtrl.errors?.['required']">Email is required.</small>
          <small *ngIf="emailCtrl.errors?.['email']">Invalid email format.</small>
        </div>
      </div>
    </div>

    <!-- Add Email Button -->
    <button type="button" (click)="addEmail()">Add Email</button>

    <!-- Submit Button -->
    <button type="submit" [disabled]="dynamicForm.invalid">Submit</button>
  </form>
</div>
